[gd_scene load_steps=14 format=3 uid="uid://dfyjjpvk4cxdm"]

[ext_resource type="PackedScene" uid="uid://gvyc7leve70d" path="res://assets/models/bosses/OrcBrute.glb" id="1_4i3xf"]
[ext_resource type="Script" uid="uid://2p8b74gp37jw" path="res://src/actors/enemies/Boss.gd" id="1_ypv3s"]
[ext_resource type="Resource" uid="uid://divphex2ykb7" path="res://src/actors/enemies/bosses/weapons/Orc_Axe.tres" id="2_ilf86"]
[ext_resource type="Resource" uid="uid://bidblay1hqrnw" path="res://src/actors/masks/Mask_Combatiente.tres" id="3_iacak"]
[ext_resource type="AnimationLibrary" uid="uid://cslccb3nu43ef" path="res://src/actors/enemies/bosses/animations.res" id="3_ypv3s"]
[ext_resource type="AnimationNodeBlendTree" uid="uid://d20sj1ecv6luv" path="res://src/actors/enemies/bosses/orc_brute_green.tres" id="4_af3tb"]
[ext_resource type="PackedScene" uid="uid://78gqvpcra5yr" path="res://src/actors/enemies/bosses/weapons/Orc_Axe.tscn" id="5_ilf86"]
[ext_resource type="Script" uid="uid://b1ulnfh2lfyv0" path="res://src/actors/player/scripts/HealthComponent.gd" id="6_05yjr"]
[ext_resource type="Script" uid="uid://bhv4u3i04oi7h" path="res://src/actors/player/scripts/combat_manager.gd" id="7_45u55"]
[ext_resource type="Script" uid="uid://jcg751xxldjo" path="res://src/actors/player/scripts/Hurtbox.gd" id="8_ilf86"]
[ext_resource type="Script" uid="uid://6qh57tw338s" path="res://src/actors/player/scripts/MaskManager.gd" id="9_iacak"]

[sub_resource type="BoxShape3D" id="BoxShape3D_60x1m"]
size = Vector3(2.3388062, 3.9105148, 1.4047852)

[sub_resource type="BoxShape3D" id="BoxShape3D_im6gr"]
size = Vector3(2.7020416, 3.907, 1.9729702)

[node name="Orc_Brute_Green" type="CharacterBody3D" node_paths=PackedStringArray("visual_mesh", "anim_tree")]
collision_layer = 4
collision_mask = 6
script = ExtResource("1_ypv3s")
atk1_windup = 0.78
atk1_active = 0.15
atk1_dmg = 0.75
atk2_windup = 0.44
atk2_active = 0.1
atk2_dmg = 1.0
atk3_windup = 0.7
atk3_active = 0.6
atk3_dmg = 1.25
loadout_weapon_r = ExtResource("2_ilf86")
loadout_mask = ExtResource("3_iacak")
visual_mesh = NodePath("OrcBrute/Rig/Skeleton3D")
anim_tree = NodePath("OrcBrute/AnimationTree")

[node name="OrcBrute" parent="." instance=ExtResource("1_4i3xf")]
transform = Transform3D(-1, 0, -8.742278e-08, 0, 1, 0, 8.742278e-08, 0, -1, 0, 0, 0)

[node name="Skeleton3D" parent="OrcBrute/Rig" index="0"]
bones/4/rotation = Quaternion(-0.51412356, -0.48546582, -0.48546574, 0.51412344)
bones/4/scale = Vector3(0.9999997, 0.99999976, 1)
bones/5/rotation = Quaternion(1.8694193e-09, -6.666897e-08, -0.05529301, 0.9984702)
bones/6/rotation = Quaternion(-8.6409655e-12, -4.5023152e-10, 0.0266581, 0.99964464)
bones/7/rotation = Quaternion(6.3075647e-09, 1.4601335e-07, -1.7522536e-06, 1)
bones/8/rotation = Quaternion(3.79333e-09, 3.7933297e-09, -0.7071068, 0.7071067)
bones/8/scale = Vector3(1, 1, 1)
bones/9/rotation = Quaternion(-0.51412356, 0.48546585, 0.48546576, 0.5141235)
bones/9/scale = Vector3(0.9999997, 0.99999976, 1)
bones/10/rotation = Quaternion(1.8694197e-09, 6.666896e-08, 0.05529301, 0.9984702)
bones/11/rotation = Quaternion(-8.640964e-12, 4.5023157e-10, -0.0266581, 0.99964464)
bones/12/rotation = Quaternion(6.3074874e-09, -1.0223015e-07, 1.7522536e-06, 1)
bones/13/scale = Vector3(1, 1, 1)
bones/15/rotation = Quaternion(0.9999039, -5.5808457e-08, -1.1316095e-08, 0.013863273)
bones/15/scale = Vector3(1, 0.99999976, 1.0000001)
bones/16/rotation = Quaternion(0.07813356, 5.641553e-08, -5.7139655e-08, 0.99694294)
bones/16/scale = Vector3(1, 0.99999994, 0.99999976)
bones/17/rotation = Quaternion(-0.43310812, 3.9441485e-08, -8.264325e-08, 0.901342)
bones/18/rotation = Quaternion(2.7548703e-09, 0.92035484, -0.3910843, 9.798771e-08)
bones/18/scale = Vector3(1, 1.0000006, 1.0000002)
bones/19/rotation = Quaternion(0.9999039, 5.8078882e-08, -3.243097e-08, 0.013863273)
bones/19/scale = Vector3(1, 0.99999976, 1.0000001)
bones/20/rotation = Quaternion(0.07813356, -5.641557e-08, 5.713966e-08, 0.99694294)
bones/20/scale = Vector3(1, 0.99999994, 0.99999976)
bones/21/rotation = Quaternion(-0.43310812, 1.9118197e-07, 6.787563e-09, 0.901342)
bones/22/rotation = Quaternion(8.1278216e-08, 0.92035484, -0.3910843, 9.6427186e-08)
bones/22/scale = Vector3(1, 1.0000006, 1.0000002)
bones/23/rotation = Quaternion(-0.7071068, -6.0662586e-08, -6.0662565e-08, 0.7071068)
bones/24/rotation = Quaternion(0.49999994, 0.50000006, 0.50000006, -0.5)
bones/25/rotation = Quaternion(-0.7071068, -6.066261e-08, -6.066258e-08, 0.7071068)
bones/26/rotation = Quaternion(-0.50000006, 0.4999999, 0.5, 0.5)
bones/27/rotation = Quaternion(0.7071068, -2.2930234e-07, -4.6055177e-08, 0.7071068)
bones/28/rotation = Quaternion(-0.7071068, -7.052851e-08, -7.0528486e-08, 0.7071068)
bones/29/rotation = Quaternion(7.10544e-15, -1.3832102e-22, 1, -3.351038e-34)
bones/30/scale = Vector3(1, 0.99999994, 0.9999999)
bones/31/rotation = Quaternion(-0.39108434, 2.9507857e-08, 1.0680487e-08, 0.92035484)
bones/31/scale = Vector3(1, 0.99999994, 1)
bones/32/rotation = Quaternion(1, -4.4409154e-16, 7.5497894e-08, 3.155427e-30)
bones/34/rotation = Quaternion(0.7071068, -3.8238497e-08, 1.4500867e-07, 0.7071068)
bones/35/rotation = Quaternion(-0.7071068, -7.0528515e-08, -7.05285e-08, 0.7071068)
bones/37/rotation = Quaternion(3.4934562e-08, 0.39108434, 0.92035484, 2.9526053e-08)
bones/37/scale = Vector3(1, 0.99999994, 0.9999999)
bones/38/rotation = Quaternion(-0.39108434, 2.9507833e-08, 1.068052e-08, 0.92035484)
bones/38/scale = Vector3(1, 0.99999994, 1)
bones/39/rotation = Quaternion(1, -3.962816e-16, 7.5497894e-08, 1.341112e-22)

bones/1/position = Vector3(-2.3193994e-08, 0.48808184, 0.09728269)
bones/2/rotation = Quaternion(0.09691417, -0.21537048, -0.021485375, 0.97147393)
bones/2/scale = Vector3(1, 0.99999994, 1)
bones/3/rotation = Quaternion(0.063310504, -1.3152135e-07, -0.029522153, 0.99755716)
bones/3/scale = Vector3(0.99999994, 0.99999994, 1)
bones/4/position = Vector3(0.44200677, 0.24913204, 0.034578178)
bones/4/rotation = Quaternion(-0.7587134, -0.30968785, -0.119502924, 0.56050545)
bones/4/scale = Vector3(0.9999997, 0.99999946, 1.0000001)
bones/5/rotation = Quaternion(1.9529356e-08, -5.7721866e-08, -0.8347442, 0.55063796)
bones/5/scale = Vector3(1.0000002, 0.9999993, 1.0000001)
bones/6/rotation = Quaternion(1.844032e-09, -5.14515e-11, 0.0266581, 0.99964464)
bones/7/rotation = Quaternion(-0.23666677, -0.6890912, -0.19272418, 0.65726674)
bones/7/scale = Vector3(0.99999976, 0.99999994, 1.0000001)
bones/8/position = Vector3(2.4880276e-10, 0.11535018, -0.06899989)
bones/8/rotation = Quaternion(-0.3861759, -0.3521542, -0.600734, 0.6049582)
bones/8/scale = Vector3(1, 1, 1.0000001)
bones/9/position = Vector3(-0.44200683, 0.24913192, 6.658669e-08)
bones/9/rotation = Quaternion(-0.5892108, 0.27872148, 0.62791175, 0.42529026)
bones/9/scale = Vector3(0.9999997, 0.9999996, 0.99999994)
bones/10/rotation = Quaternion(-6.210172e-08, 8.345896e-08, 0.4674666, 0.88401073)
bones/10/scale = Vector3(1.0000005, 0.9999999, 1.0000002)
bones/11/rotation = Quaternion(-8.312263e-11, -2.3427398e-09, -0.026658095, 0.99964464)
bones/11/scale = Vector3(0.99999994, 1.0000001, 1.0000001)
bones/12/rotation = Quaternion(-0.17379512, 0.19676015, -0.09733144, 0.9600038)
bones/12/scale = Vector3(0.9999999, 1.0000001, 1.0000002)
bones/13/position = Vector3(-1.5149979e-08, 0.11535033, -0.06899989)
bones/13/rotation = Quaternion(-4.109224e-09, -1.1591321e-09, 0.7071068, 0.7071067)
bones/13/scale = Vector3(1.0000001, 1.0000001, 1)
bones/14/rotation = Quaternion(-0.08280519, 0.21565977, 0.018357472, 0.9727781)
bones/14/scale = Vector3(1, 0.9999999, 1)
bones/15/position = Vector3(0.17094508, 0.11313756, 0.06406263)
bones/15/rotation = Quaternion(0.98699504, 0.033870924, 0.028560875, 0.15452477)
bones/16/rotation = Quaternion(0.3679403, 5.1185726e-08, -2.6949942e-07, 0.9298494)
bones/16/scale = Vector3(1.0000001, 0.9999999, 0.99999976)
bones/17/rotation = Quaternion(-0.54038846, -0.2666789, -0.0061204527, 0.79801327)
bones/17/scale = Vector3(0.99999994, 1, 0.9999999)
bones/18/rotation = Quaternion(0.00025337454, 0.9201793, -0.3914971, -5.7544297e-05)
bones/18/scale = Vector3(1, 1.0000005, 1.000001)
bones/19/position = Vector3(-0.17094508, 0.11398718, -0.05694454)
bones/19/rotation = Quaternion(0.9947786, -0.058869936, -0.022134306, -0.080375284)
bones/19/scale = Vector3(1.0000001, 0.99999976, 1.0000001)
bones/20/rotation = Quaternion(0.17653985, -5.6527803e-08, 1.2769178e-07, 0.9842935)
bones/20/scale = Vector3(1, 0.99999994, 0.99999976)
bones/21/rotation = Quaternion(-0.54521674, 0.3514092, -0.01026435, 0.7610157)
bones/21/scale = Vector3(0.99999994, 0.99999994, 0.99999994)
bones/22/rotation = Quaternion(-0.00027570984, 0.9201377, -0.39159474, 6.256391e-05)
bones/22/scale = Vector3(0.99999994, 1.0000007, 1.0000002)
bones/23/position = Vector3(0.73180705, 1.1533054, -0.662466)
bones/23/rotation = Quaternion(-0.7071068, -6.0662586e-08, -6.0662565e-08, 0.7071068)
bones/24/position = Vector3(0.6711962, 1.2205539, 0.6297847)
bones/24/rotation = Quaternion(0.38165653, 0.36096612, 0.5957655, 0.6075404)
bones/24/scale = Vector3(1, 0.99999994, 1.0000001)
bones/25/rotation = Quaternion(-0.7071068, -6.066261e-08, -6.066258e-08, 0.7071068)
bones/26/position = Vector3(-0.8546673, 1.0862583, -0.025196219)
bones/26/rotation = Quaternion(-0.72206515, 0.2314502, 0.62084585, 0.19900575)
bones/26/scale = Vector3(1, 0.99999994, 1)
bones/27/rotation = Quaternion(0.7071068, -2.2930234e-07, -4.6055177e-08, 0.7071068)
bones/28/position = Vector3(0.21391782, 0.025990263, 0.43249536)
bones/28/rotation = Quaternion(-0.70509243, 0.05333549, 0.05333548, 0.70509243)
bones/29/rotation = Quaternion(9.6579225e-09, 1.7795515e-09, 0.98571914, -0.1683977)
bones/30/position = Vector3(1.1203518e-08, 0.21343613, 1.0726939e-08)
bones/30/rotation = Quaternion(2.7724028e-08, 0.39108434, 0.92035484, 2.6762391e-08)
bones/30/scale = Vector3(1, 0.99999994, 0.9999999)
bones/31/position = Vector3(-2.2597133e-09, 0.16565004, 2.8892813e-09)
bones/31/rotation = Quaternion(-0.39108434, 2.9507857e-08, 1.0680487e-08, 0.92035484)
bones/31/scale = Vector3(1, 0.99999994, 1)
bones/32/rotation = Quaternion(1, -4.9554156e-09, 7.045317e-08, -3.7412341e-16)
bones/32/scale = Vector3(1, 0.99999994, 1)
bones/33/rotation = Quaternion(5.551129e-17, -6.740975e-17, -1.94669e-08, 1)
bones/34/rotation = Quaternion(0.7071068, -3.8238497e-08, 1.4500867e-07, 0.7071068)
bones/35/position = Vector3(-0.17094506, 0.025990263, 0.17935233)
bones/35/rotation = Quaternion(-0.7071068, -7.0528515e-08, -7.05285e-08, 0.7071068)
bones/36/rotation = Quaternion(-1.8695035e-08, 3.819307e-09, 0.9464665, 0.32280213)
bones/36/scale = Vector3(0.99999994, 0.99999994, 1)
bones/37/position = Vector3(1.8654097e-08, 0.21343614, 1.5706455e-08)
bones/37/rotation = Quaternion(3.9926793e-08, 0.39108434, 0.92035484, 3.8851347e-08)
bones/37/scale = Vector3(1, 0.99999994, 0.9999999)
bones/38/position = Vector3(2.0092035e-08, 0.16565004, -6.6145613e-09)
bones/38/rotation = Quaternion(-0.39108434, 2.6594025e-08, 3.8233425e-09, 0.92035484)
bones/38/scale = Vector3(0.99999994, 0.9999999, 1)
bones/39/rotation = Quaternion(1, -4.453307e-09, 7.865458e-08, -7.450581e-09)
bones/39/scale = Vector3(0.9999999, 1, 1)
bones/40/rotation = Quaternion(8.881786e-16, -6.7409847e-17, -3.4368043e-08, 1)

[node name="Left Hand" type="BoneAttachment3D" parent="OrcBrute/Rig/Skeleton3D" index="8"]
transform = Transform3D(0.99997324, -0.00095278025, 0.007240385, 0.00079642795, 0.9997674, 0.021550559, -0.0072591603, -0.021544307, 0.9997405, 0.57135504, 1.2273811, 0.7894187)
bone_name = "handslot.l"
bone_idx = 8

[node name="Right Hand" type="BoneAttachment3D" parent="OrcBrute/Rig/Skeleton3D" index="9"]
transform = Transform3D(-0.9999992, 2.672274e-07, 5.7110558e-08, 9.53521e-08, 7.5121406e-08, 0.99999994, 2.5605223e-07, 0.9999994, -4.897888e-08, -1.2473565, 1.2677608, -2.1001324e-07)
transform = Transform3D(-0.5813474, -0.12196222, -0.80446285, -0.81365514, 0.08714059, 0.57478005, -2.5404117e-07, 0.98870206, -0.14989422, -0.93745065, 0.903388, 0.0035824599)
bone_name = "handslot.r"
bone_idx = 13

[node name="Marker3D" type="Marker3D" parent="OrcBrute/Rig/Skeleton3D/Right Hand"]
transform = Transform3D(-0.99999994, 5.121047e-07, -8.74228e-08, 5.1210475e-07, 1, -9.7957795e-08, 8.742274e-08, -9.795784e-08, -0.99999994, 0, 0, 0)

[node name="Node3D" parent="OrcBrute/Rig/Skeleton3D/Right Hand/Marker3D" instance=ExtResource("5_ilf86")]

[node name="Mask" type="BoneAttachment3D" parent="OrcBrute/Rig/Skeleton3D" index="10"]
transform = Transform3D(0.99999994, 2.9802322e-08, 0, -1.4901161e-08, 0.98577815, -0.16805002, -8.940697e-08, 0.16805, 0.9857784, 4.146971e-08, 1.5855, 0.36082348)
bone_name = "head"
bone_idx = 14

[node name="Node3D" type="Node3D" parent="OrcBrute/Rig/Skeleton3D/Mask"]
transform = Transform3D(-3.278354e-08, 0, -0.75, 0, 0.75, 0, 0.75, 0, -3.278354e-08, -3.437961e-08, 0.07592893, 0.39325684)

[node name="AnimationPlayer" parent="OrcBrute" index="1"]
libraries = {
&"animations": ExtResource("3_ypv3s")
}

[node name="AnimationTree" type="AnimationTree" parent="OrcBrute"]
tree_root = ExtResource("4_af3tb")
anim_player = NodePath("../AnimationPlayer")
"parameters/StateMachine/conditions/Input jump" = false
parameters/StateMachine/conditions/is_on_floor() = false
parameters/StateMachine/Crawling/blend_position = Vector2(0, 0)
parameters/StateMachine/Dodge/blend_position = Vector2(0, 0)
parameters/StateMachine/Sneaking/blend_position = Vector2(0, 0)
parameters/StateMachine/Standing/blend_position = Vector2(0.21119332, -1.7252748)
parameters/Mezcla_L/blend_amount = 0.0
parameters/Mezcla_R/blend_amount = 0.0
parameters/Mezcla_2H/blend_amount = 0.0

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.024810791, 1.959301, 0.064697266)
shape = SubResource("BoxShape3D_60x1m")

[node name="HealthComponent" type="Node3D" parent="."]
script = ExtResource("6_05yjr")
max_health = 250.0

[node name="CombatManager" type="Node3D" parent="." node_paths=PackedStringArray("animation_tree", "right_hand_bone", "left_hand_bone", "mask_manager")]
script = ExtResource("7_45u55")
animation_tree = NodePath("../OrcBrute/AnimationTree")
right_hand_bone = NodePath("../OrcBrute/Rig/Skeleton3D/Right Hand/Marker3D")
left_hand_bone = NodePath("../OrcBrute/Rig/Skeleton3D/Left Hand")
mask_manager = NodePath("../MaskManager")
attack_layer_mask = 2

[node name="Hurtbox" type="Area3D" parent="." node_paths=PackedStringArray("health_component")]
collision_layer = 4
collision_mask = 2
script = ExtResource("8_ilf86")
health_component = NodePath("../HealthComponent")

[node name="CollisionShape3D" type="CollisionShape3D" parent="Hurtbox"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.0029525757, 1.951, -0.01066573)
shape = SubResource("BoxShape3D_im6gr")
debug_color = Color(0.86468506, 0.31135932, 0.46242207, 0.41960785)

[node name="NavigationAgent3D" type="NavigationAgent3D" parent="."]
avoidance_enabled = true

[node name="VisionManager" type="Node3D" parent="."]

[node name="Eyes" type="RayCast3D" parent="VisionManager"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.6809136, 0)
target_position = Vector3(0, -1, -10)
collision_mask = 3

[node name="MaskManager" type="Node" parent="." node_paths=PackedStringArray("player", "combat_manager", "mask_attachment_point")]
script = ExtResource("9_iacak")
player = NodePath("..")
combat_manager = NodePath("../CombatManager")
mask_attachment_point = NodePath("../OrcBrute/Rig/Skeleton3D/Mask/Node3D")

[editable path="OrcBrute"]
