[gd_scene load_steps=14 format=3 uid="uid://dfyjjpvk4cxdm"]

[ext_resource type="PackedScene" uid="uid://gvyc7leve70d" path="res://assets/models/bosses/OrcBrute.glb" id="1_4i3xf"]
[ext_resource type="Script" uid="uid://2p8b74gp37jw" path="res://src/actors/enemies/Boss.gd" id="1_ypv3s"]
[ext_resource type="Resource" uid="uid://divphex2ykb7" path="res://src/actors/enemies/bosses/weapons/Orc_Axe.tres" id="2_ilf86"]
[ext_resource type="Resource" uid="uid://bidblay1hqrnw" path="res://src/actors/masks/Mask_Combatiente.tres" id="3_iacak"]
[ext_resource type="AnimationLibrary" uid="uid://cslccb3nu43ef" path="res://src/actors/enemies/bosses/animations.res" id="3_ypv3s"]
[ext_resource type="AnimationNodeBlendTree" uid="uid://d20sj1ecv6luv" path="res://src/actors/enemies/bosses/orc_brute_green.tres" id="4_af3tb"]
[ext_resource type="PackedScene" uid="uid://78gqvpcra5yr" path="res://src/actors/enemies/bosses/weapons/Orc_Axe.tscn" id="5_ilf86"]
[ext_resource type="Script" uid="uid://b1ulnfh2lfyv0" path="res://src/actors/player/scripts/HealthComponent.gd" id="6_05yjr"]
[ext_resource type="Script" uid="uid://bhv4u3i04oi7h" path="res://src/actors/player/scripts/combat_manager.gd" id="7_45u55"]
[ext_resource type="Script" uid="uid://jcg751xxldjo" path="res://src/actors/player/scripts/Hurtbox.gd" id="8_ilf86"]
[ext_resource type="Script" uid="uid://6qh57tw338s" path="res://src/actors/player/scripts/MaskManager.gd" id="9_iacak"]

[sub_resource type="BoxShape3D" id="BoxShape3D_60x1m"]
size = Vector3(2.3388062, 3.9105148, 1.4047852)

[sub_resource type="BoxShape3D" id="BoxShape3D_im6gr"]
size = Vector3(2.7020416, 3.907, 1.9729702)

[node name="Orc_Brute_Green" type="CharacterBody3D" node_paths=PackedStringArray("anim_tree", "visual_mesh")]
collision_layer = 4
collision_mask = 6
script = ExtResource("1_ypv3s")
atk1_windup = 0.78
atk1_active = 0.15
atk1_dmg = 0.75
atk2_windup = 0.44
atk2_active = 0.1
atk2_dmg = 1.0
atk3_windup = 0.7
atk3_active = 0.6
atk3_dmg = 1.25
loadout_weapon_r = ExtResource("2_ilf86")
loadout_mask = ExtResource("3_iacak")
anim_tree = NodePath("OrcBrute/AnimationTree")
visual_mesh = NodePath("OrcBrute/Rig/Skeleton3D")

[node name="OrcBrute" parent="." instance=ExtResource("1_4i3xf")]
transform = Transform3D(-1, 0, -8.742278e-08, 0, 1, 0, 8.742278e-08, 0, -1, 0, 0, 0)

[node name="Skeleton3D" parent="OrcBrute/Rig" index="0"]
bones/1/position = Vector3(-1.2965508e-09, 0.46355882, 0.0054381294)
bones/1/rotation = Quaternion(-1.11122625e-10, 0.043157753, 2.5724098e-09, 0.9990683)
bones/1/scale = Vector3(0.99999994, 1, 0.99999994)
bones/2/rotation = Quaternion(-1.38777746e-17, 1.1920926e-07, 1.110223e-16, 1)
bones/3/rotation = Quaternion(0.10770158, -1.0763579e-07, 0.009322419, 0.99413955)
bones/3/scale = Vector3(1, 0.9999999, 1)
bones/4/position = Vector3(0.44200686, 0.2491318, 1.0950914e-07)
bones/4/rotation = Quaternion(-0.61842924, -0.17933284, -0.59969807, 0.4751286)
bones/4/scale = Vector3(0.9999995, 0.9999996, 0.9999997)
bones/5/rotation = Quaternion(2.3312163e-08, -5.459475e-08, -0.5170966, 0.8559271)
bones/5/scale = Vector3(1, 0.99999976, 1)
bones/6/rotation = Quaternion(-7.506228e-09, 1.2131373e-09, 0.026658101, 0.99964464)
bones/7/rotation = Quaternion(-0.30504748, -0.27708414, -0.067781456, 0.9086122)
bones/7/scale = Vector3(0.99999976, 1, 1.0000001)
bones/8/rotation = Quaternion(-0.02525921, -0.00061354146, -0.5007622, 0.86521614)
bones/8/scale = Vector3(1, 0.99999994, 0.99999994)
bones/9/position = Vector3(-0.44200683, 0.2491318, 1.03778376e-07)
bones/9/rotation = Quaternion(-0.6771481, 0.070378564, 0.519423, 0.5164467)
bones/9/scale = Vector3(0.9999992, 0.9999992, 0.99999964)
bones/10/rotation = Quaternion(2.4020178e-08, 5.6618607e-08, 0.524592, 0.8513538)
bones/10/scale = Vector3(1.0000004, 0.99999994, 1.0000004)
bones/11/rotation = Quaternion(-2.2476575e-08, -3.6088688e-09, -0.026658094, 0.99964464)
bones/11/scale = Vector3(0.99999994, 0.99999994, 1)
bones/12/rotation = Quaternion(-0.2556535, 0.22763023, -0.11110245, 0.9329963)
bones/12/scale = Vector3(0.9999998, 0.9999998, 1.0000002)
bones/13/position = Vector3(1.46523575e-08, 0.11535021, -0.06899989)
bones/13/rotation = Quaternion(1.0708028e-08, -7.4153057e-09, 0.7071068, 0.7071067)
bones/13/scale = Vector3(0.99999994, 1, 0.99999994)
bones/14/rotation = Quaternion(-0.045529336, -0.03900711, 0.041975915, 0.9973182)
bones/14/scale = Vector3(1.0000001, 1, 0.99999994)
bones/15/position = Vector3(0.17094506, 0.11358726, 1.3923265e-08)
bones/15/rotation = Quaternion(0.9866269, 0.061138906, 0.0783024, 0.12922084)
bones/15/scale = Vector3(0.9999998, 0.9999997, 0.99999994)
bones/16/rotation = Quaternion(0.44788918, 5.1269836e-08, -3.2512e-07, 0.89408904)
bones/16/scale = Vector3(1.0000001, 1, 1)
bones/17/rotation = Quaternion(-0.6363517, -0.19743389, 0.060645606, 0.7432352)
bones/17/scale = Vector3(1, 1.0000002, 1)
bones/18/rotation = Quaternion(-1.6888991e-05, 0.92008877, -0.39170983, 3.1689506e-06)
bones/18/scale = Vector3(0.9999999, 1.0000002, 1.0000005)
bones/19/position = Vector3(-0.17094506, 0.11358726, 1.7647139e-08)
bones/19/rotation = Quaternion(0.9871946, -0.027987301, 0.030356446, 0.1540849)
bones/19/scale = Vector3(1, 0.99999976, 1.0000001)
bones/20/rotation = Quaternion(0.47176066, -4.9641365e-08, 3.4423618e-07, 0.8817266)
bones/20/scale = Vector3(1.0000001, 0.99999994, 1.0000001)
bones/21/rotation = Quaternion(-0.65225613, 0.111445636, -0.017580548, 0.74955505)
bones/21/scale = Vector3(0.9999998, 1.0000006, 0.9999997)
bones/22/rotation = Quaternion(-0.00011148542, 0.92023724, -0.39136115, 2.5368023e-05)
bones/22/scale = Vector3(0.99999976, 0.99999994, 1.0000006)
bones/23/rotation = Quaternion(-0.7071068, -6.0662586e-08, -6.0662565e-08, 0.7071068)
bones/24/position = Vector3(0.85107505, 0.97053, 0.009018989)
bones/24/rotation = Quaternion(0.66967785, 0.18482171, 0.70793146, 0.12730134)
bones/24/scale = Vector3(1, 0.99999994, 1.0000001)
bones/25/rotation = Quaternion(-0.7071068, -6.066261e-08, -6.066258e-08, 0.7071068)
bones/26/position = Vector3(-0.841078, 0.957575, 0.009121067)
bones/26/rotation = Quaternion(-0.7338244, 0.103315346, 0.6649902, 0.092821695)
bones/26/scale = Vector3(1, 1, 0.99999994)
bones/27/rotation = Quaternion(0.7071068, -2.2930234e-07, -4.6055177e-08, 0.7071068)
bones/28/position = Vector3(0.20218208, 0.025990263, 0.20518117)
bones/28/rotation = Quaternion(-0.7071068, -7.052851e-08, -7.0528486e-08, 0.7071068)
bones/29/rotation = Quaternion(9.6579225e-09, 1.7795515e-09, 0.98571914, -0.1683977)
bones/30/position = Vector3(1.8654099e-08, 0.21343614, -4.440892e-16)
bones/30/rotation = Quaternion(3.9897706e-08, 0.39108434, 0.92035484, 3.033087e-08)
bones/30/scale = Vector3(0.99999994, 0.9999999, 0.9999999)
bones/31/position = Vector3(2.0092028e-08, 0.16565004, 2.0754509e-10)
bones/31/rotation = Quaternion(-0.39108434, 2.9507857e-08, 1.0680487e-08, 0.92035484)
bones/31/scale = Vector3(1, 0.99999994, 1)
bones/32/rotation = Quaternion(1, -5.1169335e-09, 8.160665e-08, 7.45058e-09)
bones/33/rotation = Quaternion(4.1633502e-17, -6.740975e-17, -1.94669e-08, 1)
bones/34/rotation = Quaternion(0.7071068, -3.8238497e-08, 1.4500867e-07, 0.7071068)
bones/35/rotation = Quaternion(-0.7071068, -7.0528515e-08, -7.05285e-08, 0.7071068)
bones/36/rotation = Quaternion(-5.8358944e-09, 6.4383693e-10, 0.9948094, 0.10175614)
bones/37/position = Vector3(3.7529344e-09, 0.21343614, -5.171493e-09)
bones/37/rotation = Quaternion(2.8003658e-08, 0.39108434, 0.92035484, 2.6747871e-08)
bones/37/scale = Vector3(1, 0.99999994, 0.9999999)
bones/38/position = Vector3(2.0092035e-08, 0.16565004, -5.273694e-09)
bones/38/rotation = Quaternion(-0.39108434, 3.096473e-08, 1.4109109e-08, 0.92035484)
bones/38/scale = Vector3(1.0000001, 1, 1)
bones/39/rotation = Quaternion(1, 6.045848e-09, 7.055151e-08, 4.564489e-16)
bones/40/rotation = Quaternion(1.00614094e-16, -6.740981e-17, -1.5741591e-08, 1)
bones/40/scale = Vector3(1.0000001, 1, 1)

[node name="Left Hand" type="BoneAttachment3D" parent="OrcBrute/Rig/Skeleton3D" index="8"]
transform = Transform3D(-0.06728632, -0.07064058, 0.99522936, 0.99486446, -0.080335505, 0.061559908, 0.07560365, 0.9942609, 0.07568326, 0.8468922, 0.8028933, 0.09276014)
bone_name = "handslot.l"
bone_idx = 8

[node name="Right Hand" type="BoneAttachment3D" parent="OrcBrute/Rig/Skeleton3D" index="9"]
transform = Transform3D(-0.27507052, -0.094239935, -0.9567937, -0.9614221, 0.028185349, 0.27362606, 0.0011807797, 0.99514955, -0.0983572, -0.866238, 0.7669878, 0.04094106)
bone_name = "handslot.r"
bone_idx = 13

[node name="Marker3D" type="Marker3D" parent="OrcBrute/Rig/Skeleton3D/Right Hand"]
transform = Transform3D(-0.99999994, 5.121047e-07, -8.74228e-08, 5.1210475e-07, 1, -9.7957795e-08, 8.742274e-08, -9.795784e-08, -0.99999994, 0, 0, 0)

[node name="Node3D" parent="OrcBrute/Rig/Skeleton3D/Right Hand/Marker3D" instance=ExtResource("5_ilf86")]

[node name="AnimationPlayer" parent="OrcBrute" index="1"]
libraries = {
&"animations": ExtResource("3_ypv3s")
}

[node name="AnimationTree" type="AnimationTree" parent="OrcBrute"]
tree_root = ExtResource("4_af3tb")
anim_player = NodePath("../AnimationPlayer")
"parameters/StateMachine/conditions/Input jump" = false
parameters/StateMachine/conditions/is_on_floor() = false
parameters/StateMachine/Crawling/blend_position = Vector2(0, 0)
parameters/StateMachine/Dodge/blend_position = Vector2(0, 0)
parameters/StateMachine/Sneaking/blend_position = Vector2(0, 0)
parameters/StateMachine/Standing/blend_position = Vector2(0.001806736, -0.010204077)
parameters/Mezcla_L/blend_amount = 0.0
parameters/Mezcla_R/blend_amount = 0.0
parameters/Mezcla_2H/blend_amount = 0.0

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.024810791, 1.959301, 0.064697266)
shape = SubResource("BoxShape3D_60x1m")

[node name="HealthComponent" type="Node3D" parent="."]
script = ExtResource("6_05yjr")
max_health = 250.0

[node name="CombatManager" type="Node3D" parent="." node_paths=PackedStringArray("animation_tree", "right_hand_bone", "left_hand_bone", "mask_manager")]
script = ExtResource("7_45u55")
animation_tree = NodePath("../OrcBrute/AnimationTree")
right_hand_bone = NodePath("../OrcBrute/Rig/Skeleton3D/Right Hand/Marker3D")
left_hand_bone = NodePath("../OrcBrute/Rig/Skeleton3D/Left Hand")
mask_manager = NodePath("../MaskManager")
attack_layer_mask = 2
ult_charge_reward = 100.0
slot_1_right = ExtResource("2_ilf86")
mask_slot_1 = ExtResource("3_iacak")

[node name="Hurtbox" type="Area3D" parent="." node_paths=PackedStringArray("health_component")]
collision_layer = 4
collision_mask = 2
script = ExtResource("8_ilf86")
health_component = NodePath("../HealthComponent")

[node name="CollisionShape3D" type="CollisionShape3D" parent="Hurtbox"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.0029525757, 1.951, -0.01066573)
shape = SubResource("BoxShape3D_im6gr")
debug_color = Color(0.86468506, 0.31135932, 0.46242207, 0.41960785)

[node name="NavigationAgent3D" type="NavigationAgent3D" parent="."]
avoidance_enabled = true

[node name="VisionManager" type="Node3D" parent="."]

[node name="Eyes" type="RayCast3D" parent="VisionManager"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.6809136, 0)
target_position = Vector3(0, -1, -10)
collision_mask = 3

[node name="MaskManager" type="Node" parent="." node_paths=PackedStringArray("player", "combat_manager")]
script = ExtResource("9_iacak")
player = NodePath("..")
combat_manager = NodePath("../CombatManager")
ult_reward = 100.0

[editable path="OrcBrute"]
