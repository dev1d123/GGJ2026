[gd_scene load_steps=14 format=3 uid="uid://dfyjjpvk4cxdm"]

[ext_resource type="PackedScene" uid="uid://gvyc7leve70d" path="res://assets/models/bosses/OrcBrute.glb" id="1_4i3xf"]
[ext_resource type="Script" uid="uid://2p8b74gp37jw" path="res://src/actors/enemies/Boss.gd" id="1_ypv3s"]
[ext_resource type="Resource" uid="uid://divphex2ykb7" path="res://src/actors/enemies/bosses/weapons/Orc_Axe.tres" id="2_ilf86"]
[ext_resource type="Resource" uid="uid://bidblay1hqrnw" path="res://src/actors/masks/Mask_Combatiente.tres" id="3_iacak"]
[ext_resource type="AnimationLibrary" uid="uid://cslccb3nu43ef" path="res://src/actors/enemies/bosses/animations.res" id="3_ypv3s"]
[ext_resource type="AnimationNodeBlendTree" uid="uid://d20sj1ecv6luv" path="res://src/actors/enemies/bosses/orc_brute_green.tres" id="4_af3tb"]
[ext_resource type="PackedScene" uid="uid://78gqvpcra5yr" path="res://src/actors/enemies/bosses/weapons/Orc_Axe.tscn" id="5_ilf86"]
[ext_resource type="Script" uid="uid://b1ulnfh2lfyv0" path="res://src/actors/player/scripts/HealthComponent.gd" id="6_05yjr"]
[ext_resource type="Script" uid="uid://bhv4u3i04oi7h" path="res://src/actors/player/scripts/combat_manager.gd" id="7_45u55"]
[ext_resource type="Script" uid="uid://jcg751xxldjo" path="res://src/actors/player/scripts/Hurtbox.gd" id="8_ilf86"]
[ext_resource type="Script" uid="uid://6qh57tw338s" path="res://src/actors/player/scripts/MaskManager.gd" id="9_iacak"]

[sub_resource type="BoxShape3D" id="BoxShape3D_60x1m"]
size = Vector3(2.3388062, 3.9105148, 1.4047852)

[sub_resource type="BoxShape3D" id="BoxShape3D_im6gr"]
size = Vector3(2.7020416, 3.907, 1.9729702)

[node name="Orc_Brute_Green" type="CharacterBody3D" node_paths=PackedStringArray("anim_tree", "visual_mesh")]
collision_layer = 4
collision_mask = 6
script = ExtResource("1_ypv3s")
atk1_windup = 0.78
atk1_active = 0.15
atk1_dmg = 0.75
atk2_windup = 0.44
atk2_active = 0.1
atk2_dmg = 1.0
atk3_windup = 0.7
atk3_active = 0.6
atk3_dmg = 1.25
loadout_weapon_r = ExtResource("2_ilf86")
loadout_mask = ExtResource("3_iacak")
anim_tree = NodePath("OrcBrute/AnimationTree")
visual_mesh = NodePath("OrcBrute/Rig/Skeleton3D")

[node name="OrcBrute" parent="." instance=ExtResource("1_4i3xf")]
transform = Transform3D(-1, 0, -8.742278e-08, 0, 1, 0, 8.742278e-08, 0, -1, 0, 0, 0)

[node name="Left Hand" type="BoneAttachment3D" parent="OrcBrute/Rig/Skeleton3D" index="8"]
transform = Transform3D(-0.9999994, -3.9388814e-07, -1.7631994e-07, -1.4119937e-07, -2.5388667e-07, 0.99999994, -3.1938262e-07, 0.9999995, 2.1740138e-07, 1.247357, 1.2677608, -1.6891144e-07)
bone_name = "handslot.l"
bone_idx = 8

[node name="Right Hand" type="BoneAttachment3D" parent="OrcBrute/Rig/Skeleton3D" index="9"]
transform = Transform3D(-0.9999994, 2.709536e-07, 1.7631986e-07, 1.3436956e-07, -2.8533373e-07, 0.99999994, 1.9644807e-07, 0.9999995, 2.4904438e-07, -1.2473569, 1.2677608, -2.743976e-07)
bone_name = "handslot.r"
bone_idx = 13

[node name="Marker3D" type="Marker3D" parent="OrcBrute/Rig/Skeleton3D/Right Hand"]
transform = Transform3D(-0.99999994, 5.121047e-07, -8.74228e-08, 5.1210475e-07, 1, -9.7957795e-08, 8.742274e-08, -9.795784e-08, -0.99999994, 0, 0, 0)

[node name="Node3D" parent="OrcBrute/Rig/Skeleton3D/Right Hand/Marker3D" instance=ExtResource("5_ilf86")]

[node name="Mask" type="BoneAttachment3D" parent="OrcBrute/Rig/Skeleton3D" index="10"]
transform = Transform3D(1, 0, 1.4210861e-14, 0, 0.99999994, 0, -1.4210861e-14, 0, 1, 0, 1.657866, 0)
bone_name = "head"
bone_idx = 14

[node name="Node3D" type="Node3D" parent="OrcBrute/Rig/Skeleton3D/Mask"]
transform = Transform3D(-3.278354e-08, 0, -0.75, 0, 0.75, 0, 0.75, 0, -3.278354e-08, -3.437961e-08, 0.07592893, 0.39325684)

[node name="AnimationPlayer" parent="OrcBrute" index="1"]
libraries = {
&"animations": ExtResource("3_ypv3s")
}

[node name="AnimationTree" type="AnimationTree" parent="OrcBrute"]
tree_root = ExtResource("4_af3tb")
anim_player = NodePath("../AnimationPlayer")
"parameters/StateMachine/conditions/Input jump" = false
parameters/StateMachine/conditions/is_on_floor() = false
parameters/StateMachine/Crawling/blend_position = Vector2(0, 0)
parameters/StateMachine/Dodge/blend_position = Vector2(0, 0)
parameters/StateMachine/Sneaking/blend_position = Vector2(0, 0)
parameters/StateMachine/Standing/blend_position = Vector2(0.001806736, -0.010204077)
parameters/Mezcla_L/blend_amount = 0.0
parameters/Mezcla_R/blend_amount = 0.0
parameters/Mezcla_2H/blend_amount = 0.0

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.024810791, 1.959301, 0.064697266)
shape = SubResource("BoxShape3D_60x1m")

[node name="HealthComponent" type="Node3D" parent="."]
script = ExtResource("6_05yjr")
max_health = 250.0

[node name="CombatManager" type="Node3D" parent="." node_paths=PackedStringArray("animation_tree", "right_hand_bone", "left_hand_bone", "mask_manager")]
script = ExtResource("7_45u55")
animation_tree = NodePath("../OrcBrute/AnimationTree")
right_hand_bone = NodePath("../OrcBrute/Rig/Skeleton3D/Right Hand/Marker3D")
left_hand_bone = NodePath("../OrcBrute/Rig/Skeleton3D/Left Hand")
mask_manager = NodePath("../MaskManager")
attack_layer_mask = 2
ult_charge_reward = 100.0
slot_1_right = ExtResource("2_ilf86")
mask_slot_1 = ExtResource("3_iacak")

[node name="Hurtbox" type="Area3D" parent="." node_paths=PackedStringArray("health_component")]
collision_layer = 4
collision_mask = 2
script = ExtResource("8_ilf86")
health_component = NodePath("../HealthComponent")

[node name="CollisionShape3D" type="CollisionShape3D" parent="Hurtbox"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.0029525757, 1.951, -0.01066573)
shape = SubResource("BoxShape3D_im6gr")
debug_color = Color(0.86468506, 0.31135932, 0.46242207, 0.41960785)

[node name="NavigationAgent3D" type="NavigationAgent3D" parent="."]
avoidance_enabled = true

[node name="VisionManager" type="Node3D" parent="."]

[node name="Eyes" type="RayCast3D" parent="VisionManager"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.6809136, 0)
target_position = Vector3(0, -1, -10)
collision_mask = 3

[node name="MaskManager" type="Node" parent="." node_paths=PackedStringArray("player", "combat_manager", "mask_attachment_point")]
script = ExtResource("9_iacak")
player = NodePath("..")
combat_manager = NodePath("../CombatManager")
mask_attachment_point = NodePath("../OrcBrute/Rig/Skeleton3D/Mask/Node3D")

[editable path="OrcBrute"]
