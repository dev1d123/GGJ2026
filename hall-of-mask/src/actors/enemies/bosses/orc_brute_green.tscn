[gd_scene load_steps=14 format=3 uid="uid://dfyjjpvk4cxdm"]

[ext_resource type="PackedScene" uid="uid://gvyc7leve70d" path="res://assets/models/bosses/OrcBrute.glb" id="1_4i3xf"]
[ext_resource type="Script" uid="uid://2p8b74gp37jw" path="res://src/actors/enemies/Boss.gd" id="1_ypv3s"]
[ext_resource type="Resource" uid="uid://divphex2ykb7" path="res://src/actors/enemies/bosses/weapons/Orc_Axe.tres" id="2_ilf86"]
[ext_resource type="Resource" uid="uid://bidblay1hqrnw" path="res://src/actors/masks/Mask_Combatiente.tres" id="3_iacak"]
[ext_resource type="AnimationLibrary" uid="uid://cslccb3nu43ef" path="res://src/actors/enemies/bosses/animations.res" id="3_ypv3s"]
[ext_resource type="AnimationNodeBlendTree" uid="uid://d20sj1ecv6luv" path="res://src/actors/enemies/bosses/orc_brute_green.tres" id="4_af3tb"]
[ext_resource type="PackedScene" uid="uid://78gqvpcra5yr" path="res://src/actors/enemies/bosses/weapons/Orc_Axe.tscn" id="5_ilf86"]
[ext_resource type="Script" uid="uid://b1ulnfh2lfyv0" path="res://src/actors/player/scripts/HealthComponent.gd" id="6_05yjr"]
[ext_resource type="Script" uid="uid://bhv4u3i04oi7h" path="res://src/actors/player/scripts/combat_manager.gd" id="7_45u55"]
[ext_resource type="Script" uid="uid://jcg751xxldjo" path="res://src/actors/player/scripts/Hurtbox.gd" id="8_ilf86"]
[ext_resource type="Script" uid="uid://6qh57tw338s" path="res://src/actors/player/scripts/MaskManager.gd" id="9_iacak"]

[sub_resource type="BoxShape3D" id="BoxShape3D_60x1m"]
size = Vector3(2.3388062, 3.9105148, 1.4047852)

[sub_resource type="BoxShape3D" id="BoxShape3D_im6gr"]
size = Vector3(2.7020416, 3.907, 1.9729702)

[node name="Orc_Brute_Green" type="CharacterBody3D" node_paths=PackedStringArray("anim_tree", "visual_mesh")]
collision_layer = 4
collision_mask = 6
script = ExtResource("1_ypv3s")
atk1_windup = 0.78
atk1_active = 0.15
atk1_dmg = 0.75
atk2_windup = 0.44
atk2_active = 0.1
atk2_dmg = 1.0
atk3_windup = 0.7
atk3_active = 0.6
atk3_dmg = 1.25
loadout_weapon_r = ExtResource("2_ilf86")
loadout_mask = ExtResource("3_iacak")
anim_tree = NodePath("OrcBrute/AnimationTree")
visual_mesh = NodePath("OrcBrute/Rig/Skeleton3D")

[node name="OrcBrute" parent="." instance=ExtResource("1_4i3xf")]
transform = Transform3D(-1, 0, -8.742278e-08, 0, 1, 0, 8.742278e-08, 0, -1, 0, 0, 0)

[node name="Skeleton3D" parent="OrcBrute/Rig" index="0"]
bones/0/position = Vector3(0, 1.6519156e-05, 0)
bones/1/position = Vector3(-1.6801429e-09, 0.45024952, 0.007047032)
bones/1/rotation = Quaternion(9.186899e-05, 0.04267867, -3.9218826e-06, 0.9990889)
bones/1/scale = Vector3(0.99999994, 1, 0.99999994)
bones/2/rotation = Quaternion(0.000102290134, -6.777425e-05, 5.3433137e-06, 1)
bones/3/rotation = Quaternion(0.12528677, -8.457197e-08, 0.0108354585, 0.9920614)
bones/3/scale = Vector3(1, 0.9999999, 1)
bones/4/position = Vector3(0.44198865, 0.24911407, -3.9311748e-05)
bones/4/rotation = Quaternion(-0.6328207, -0.16882941, -0.5747718, 0.49058324)
bones/4/scale = Vector3(0.9999995, 0.9999996, 0.9999997)
bones/5/rotation = Quaternion(5.7509713e-08, -6.0027176e-08, -0.5420004, 0.8403782)
bones/5/scale = Vector3(1, 0.99999976, 1)
bones/6/rotation = Quaternion(-7.567549e-09, 1.1656519e-09, 0.026658101, 0.99964464)
bones/7/rotation = Quaternion(-0.31673405, -0.27366832, -0.06662573, 0.9057297)
bones/7/scale = Vector3(0.99999976, 1, 1.0000001)
bones/8/position = Vector3(2.6781635e-10, 0.11535024, -0.06899989)
bones/8/rotation = Quaternion(-0.023884188, -0.001158593, -0.5031043, 0.8638948)
bones/8/scale = Vector3(1, 0.99999994, 0.99999994)
bones/9/position = Vector3(-0.44200188, 0.2491207, -4.289847e-05)
bones/9/rotation = Quaternion(-0.6868529, 0.060590412, 0.49393922, 0.52970374)
bones/9/scale = Vector3(0.9999992, 0.9999992, 0.99999964)
bones/10/rotation = Quaternion(4.8644367e-08, 7.209695e-08, 0.5453115, 0.8382334)
bones/10/scale = Vector3(1.0000004, 0.99999994, 1.0000004)
bones/11/rotation = Quaternion(-2.206727e-08, -3.530015e-09, -0.026658094, 0.99964464)
bones/11/scale = Vector3(0.99999994, 0.99999994, 1)
bones/12/rotation = Quaternion(-0.26880848, 0.22253592, -0.106712595, 0.9310382)
bones/12/scale = Vector3(0.9999998, 0.9999998, 1.0000002)
bones/13/position = Vector3(1.4432999e-08, 0.11535021, -0.06899989)
bones/13/rotation = Quaternion(0.0009876896, 0.0005640857, 0.70697, 0.7072427)
bones/13/scale = Vector3(0.99999994, 1, 0.99999994)
bones/14/rotation = Quaternion(-0.07936853, -0.036877565, 0.03984715, 0.9953658)
bones/14/scale = Vector3(1.0000001, 1, 0.99999994)
bones/15/position = Vector3(0.17094506, 0.113334015, -0.00038703193)
bones/15/rotation = Quaternion(0.98367107, 0.060996793, 0.07839133, 0.15008526)
bones/15/scale = Vector3(0.9999998, 0.9999997, 0.99999994)
bones/16/rotation = Quaternion(0.5025546, 4.528861e-08, -3.6673765e-07, 0.8645455)
bones/16/scale = Vector3(1.0000001, 1, 1)
bones/17/rotation = Quaternion(-0.6632331, -0.1922681, 0.0694038, 0.719957)
bones/17/scale = Vector3(1, 1.0000002, 1)
bones/18/rotation = Quaternion(-1.670095e-05, 0.9200866, -0.39171502, 3.1348973e-06)
bones/18/scale = Vector3(0.9999999, 1.0000002, 1.0000005)
bones/19/position = Vector3(-0.17094506, 0.11335368, 0.00013056463)
bones/19/rotation = Quaternion(0.98415726, -0.029037934, 0.029569536, 0.17238599)
bones/19/scale = Vector3(1, 0.99999976, 1.0000001)
bones/20/rotation = Quaternion(0.5206195, -4.9405863e-08, 3.814863e-07, 0.85378885)
bones/20/scale = Vector3(1.0000001, 0.99999994, 1.0000001)
bones/21/rotation = Quaternion(-0.680197, 0.109377906, -0.02180082, 0.7244952)
bones/21/scale = Vector3(0.9999998, 1.0000006, 0.9999997)
bones/22/rotation = Quaternion(-0.00011024636, 0.920235, -0.39136648, 2.5088211e-05)
bones/22/scale = Vector3(0.99999976, 0.99999994, 1.0000006)
bones/23/position = Vector3(0.73180705, 1.334278, -0.709732)
bones/23/rotation = Quaternion(-0.7071068, -6.0662586e-08, -6.0662565e-08, 0.7071068)
bones/24/position = Vector3(0.8508838, 0.97346383, -0.00051643606)
bones/24/rotation = Quaternion(0.6708703, 0.17585166, 0.7105059, 0.11912485)
bones/24/scale = Vector3(1, 0.99999994, 1.0000001)
bones/25/position = Vector3(-0.73180664, 1.334278, -0.70973235)
bones/25/rotation = Quaternion(-0.7071068, -6.066261e-08, -6.066258e-08, 0.7071068)
bones/26/position = Vector3(-0.8410559, 0.9607141, -0.0012654238)
bones/26/rotation = Quaternion(-0.7331697, 0.095572285, 0.66589624, 0.09955152)
bones/26/scale = Vector3(1, 1, 0.99999994)
bones/27/position = Vector3(0.17094491, 0.34986755, 0.57586974)
bones/27/rotation = Quaternion(0.7071068, -2.2930234e-07, -4.6055177e-08, 0.7071068)
bones/28/position = Vector3(0.20183513, 0.025682084, 0.20345338)
bones/28/rotation = Quaternion(-0.70403194, -7.080552e-08, -7.0249584e-08, 0.71016836)
bones/29/position = Vector3(1.930605e-08, 0.36283267, -2.4286129e-15)
bones/29/rotation = Quaternion(9.551657e-09, 1.7599713e-09, 0.986034, -0.16654482)
bones/30/position = Vector3(1.8488585e-08, 0.21343614, -9.343989e-12)
bones/30/rotation = Quaternion(3.9842575e-08, 0.39108434, 0.92035484, 3.032193e-08)
bones/30/scale = Vector3(0.99999994, 0.9999999, 0.9999999)
bones/31/position = Vector3(1.9926514e-08, 0.16565004, 3.42873e-10)
bones/31/rotation = Quaternion(-0.39108434, 2.9507857e-08, 1.0680487e-08, 0.92035484)
bones/31/scale = Vector3(1, 0.99999994, 1)
bones/32/rotation = Quaternion(1, -5.0600977e-09, 8.15388e-08, 7.3678232e-09)
bones/33/rotation = Quaternion(-1.3461191e-11, -6.9614045e-17, -1.94669e-08, 1)
bones/34/position = Vector3(-0.17094518, 0.34986755, 0.5758696)
bones/34/rotation = Quaternion(0.7071068, -3.8238497e-08, 1.4500867e-07, 0.7071068)
bones/35/position = Vector3(-0.1709451, 0.02613842, 0.24549343)
bones/35/rotation = Quaternion(-0.7072149, -7.0525466e-08, -7.053408e-08, 0.70699877)
bones/36/position = Vector3(1.94581e-08, 0.36283267, -2.2178943e-11)
bones/36/rotation = Quaternion(-5.7712937e-09, 6.3670996e-10, 0.994924, 0.10062975)
bones/37/position = Vector3(3.5874206e-09, 0.21343614, -5.114051e-09)
bones/37/rotation = Quaternion(2.8080644e-08, 0.39108434, 0.92035484, 2.677873e-08)
bones/37/scale = Vector3(1, 0.99999994, 0.9999999)
bones/38/position = Vector3(2.0078573e-08, 0.16565004, -5.514509e-09)
bones/38/rotation = Quaternion(-0.39108434, 3.094855e-08, 1.4071026e-08, 0.92035484)
bones/38/scale = Vector3(1.0000001, 1, 1)
bones/39/rotation = Quaternion(1, 5.978694e-09, 7.060645e-08, 4.5137893e-16)
bones/40/rotation = Quaternion(7.60264e-11, -6.760679e-17, -1.578297e-08, 1)
bones/40/scale = Vector3(1.0000001, 1, 1)

[node name="Left Hand" type="BoneAttachment3D" parent="OrcBrute/Rig/Skeleton3D" index="8"]
transform = Transform3D(-0.06829028, -0.0680966, 0.99533844, 0.99311733, -0.099787034, 0.061311193, 0.09514694, 0.9926751, 0.07444237, 0.8487895, 0.80618054, 0.078348264)
bone_name = "handslot.l"
bone_idx = 8

[node name="Right Hand" type="BoneAttachment3D" parent="OrcBrute/Rig/Skeleton3D" index="9"]
transform = Transform3D(-0.27391005, -0.09699433, -0.95685154, -0.9615717, 0.008226057, 0.2744284, -0.018747244, 0.9952503, -0.09552019, -0.86807674, 0.7717254, 0.02548248)
bone_name = "handslot.r"
bone_idx = 13

[node name="Marker3D" type="Marker3D" parent="OrcBrute/Rig/Skeleton3D/Right Hand"]
transform = Transform3D(-0.99999994, 5.121047e-07, -8.74228e-08, 5.1210475e-07, 1, -9.7957795e-08, 8.742274e-08, -9.795784e-08, -0.99999994, 0, 0, 0)

[node name="Node3D" parent="OrcBrute/Rig/Skeleton3D/Right Hand/Marker3D" instance=ExtResource("5_ilf86")]

[node name="Mask" type="BoneAttachment3D" parent="OrcBrute/Rig/Skeleton3D" index="10"]
transform = Transform3D(0.9961864, -0.087141395, 0.004381515, 0.08715585, 0.99148834, -0.09671883, 0.0040840097, 0.09673181, 0.995302, -0.00012167838, 1.5693777, 0.14972302)
bone_name = "head"
bone_idx = 14

[node name="Node3D" type="Node3D" parent="OrcBrute/Rig/Skeleton3D/Mask"]
transform = Transform3D(-3.278354e-08, 0, -0.75, 0, 0.75, 0, 0.75, 0, -3.278354e-08, -3.437961e-08, 0.07592893, 0.39325684)

[node name="AnimationPlayer" parent="OrcBrute" index="1"]
libraries = {
&"animations": ExtResource("3_ypv3s")
}

[node name="AnimationTree" type="AnimationTree" parent="OrcBrute"]
tree_root = ExtResource("4_af3tb")
anim_player = NodePath("../AnimationPlayer")
"parameters/StateMachine/conditions/Input jump" = false
parameters/StateMachine/conditions/is_on_floor() = false
parameters/StateMachine/Crawling/blend_position = Vector2(0, 0)
parameters/StateMachine/Dodge/blend_position = Vector2(0, 0)
parameters/StateMachine/Sneaking/blend_position = Vector2(0, 0)
parameters/StateMachine/Standing/blend_position = Vector2(0.001806736, -0.010204077)
parameters/Mezcla_L/blend_amount = 0.0
parameters/Mezcla_R/blend_amount = 0.0
parameters/Mezcla_2H/blend_amount = 0.0

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.024810791, 1.959301, 0.064697266)
shape = SubResource("BoxShape3D_60x1m")

[node name="HealthComponent" type="Node3D" parent="."]
script = ExtResource("6_05yjr")
max_health = 250.0

[node name="CombatManager" type="Node3D" parent="." node_paths=PackedStringArray("animation_tree", "right_hand_bone", "left_hand_bone", "mask_manager")]
script = ExtResource("7_45u55")
animation_tree = NodePath("../OrcBrute/AnimationTree")
right_hand_bone = NodePath("../OrcBrute/Rig/Skeleton3D/Right Hand/Marker3D")
left_hand_bone = NodePath("../OrcBrute/Rig/Skeleton3D/Left Hand")
mask_manager = NodePath("../MaskManager")
attack_layer_mask = 2
ult_charge_reward = 100.0
slot_1_right = ExtResource("2_ilf86")
mask_slot_1 = ExtResource("3_iacak")

[node name="Hurtbox" type="Area3D" parent="." node_paths=PackedStringArray("health_component")]
collision_layer = 4
collision_mask = 2
script = ExtResource("8_ilf86")
health_component = NodePath("../HealthComponent")

[node name="CollisionShape3D" type="CollisionShape3D" parent="Hurtbox"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.0029525757, 1.951, -0.01066573)
shape = SubResource("BoxShape3D_im6gr")
debug_color = Color(0.86468506, 0.31135932, 0.46242207, 0.41960785)

[node name="NavigationAgent3D" type="NavigationAgent3D" parent="."]
avoidance_enabled = true

[node name="VisionManager" type="Node3D" parent="."]

[node name="Eyes" type="RayCast3D" parent="VisionManager"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.6809136, 0)
target_position = Vector3(0, -1, -10)
collision_mask = 3

[node name="MaskManager" type="Node" parent="." node_paths=PackedStringArray("player", "combat_manager", "mask_attachment_point")]
script = ExtResource("9_iacak")
player = NodePath("..")
combat_manager = NodePath("../CombatManager")
mask_attachment_point = NodePath("../OrcBrute/Rig/Skeleton3D/Mask/Node3D")

[editable path="OrcBrute"]
